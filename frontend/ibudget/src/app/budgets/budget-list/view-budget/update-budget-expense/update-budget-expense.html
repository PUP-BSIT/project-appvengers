<!-- Add budget expense modal -->
<div 
  #updateBudgetExpenseModal
  class="modal fade update-budget-expense-modal" 
  data-bs-backdrop="static" 
  data-bs-keyboard="false" 
  tabindex="-1">
    <div class="modal-dialog modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5">
            Update Budget Expense
          </h1>
          <button 
            type="button" 
            class="btn-close"
            (click)="closeModal()"></button>
        </div>

        <div class="modal-body">
          <form [formGroup]="updateBudgetExpenseForm">
            <label for="transaction_date">Transaction Date</label>
            <input 
              formControlName="transaction_date"
              class="form-control"
              id="transaction_date"
              type="date"
              [class.is-invalid]="isInvalid('transaction_date')"/>
            
            <!--Validator Indicator for Transaction Date-->
            @if (isInvalid('transaction_date')) {
              <div class="text-danger mt-1">Transaction date is required</div>
            }

            <label for="category_id">Category</label>
            <select 
              id="category_id" 
              class="form-select"
              formControlName="category_id"
              [class.is-invalid]="isInvalid('category_id')">
              <option selected disabled>-- Select Category --</option>
                @for (c of expenseCategories(); track c.id) {
                  <option [value]="c.id">{{ c.name }}</option>
                }
            </select>

            <!--Validator Indicator for Category-->
            @if (isInvalid('category_id')) {
              <div class="text-danger mt-1">Category is required</div>
            }

            <label for="description">Description</label>
            <textarea 
              formControlName="description"
              class="form-control mb-3"
              id="description"
              rows="3"></textarea>

            <label for="amount">Amount</label>
            <div class="input-group mb-3">
              <span class="input-group-text fw-bold">&#8369;</span>
              <input 
                formControlName="amount"
                class="form-control"
                id="amount"
                type="number" 
                [class.is-invalid]="isInvalid('amount')"
                min="1"/>
            </div>

            @if (isInvalid('amount')) {
              @if (updateBudgetExpenseForm.get('amount')?.errors?.['required']) {
                <div class="text-danger mt-1">Amount is required</div>
              } @else if (updateBudgetExpenseForm.get('amount')?.errors?.['min']) {
                <div class="text-danger mt-1">
                  Amount must be greater than 0.
                </div>
              }
            }

          </form>
        </div>

        <div class="modal-footer">
          <button 
            type="button" 
            class="btn btn-secondary"
            (click)="closeModal()">
              Close
          </button>
          <button 
            type="button" 
            class="btn btn-primary"
            (click)="updateExpense()">Update Expense</button>
        </div>
      </div>
    </div>
</div>

<!-- Snackbar -->
@if (showNotification()) {
  <div class="snackbar" [class.hide]="isHidingNotification()">
    <i class="fas fa-check-circle"></i>
    <span>{{ notificationMessage() }}</span>
  </div>
}