<app-toggleable-sidebar/>
<app-header/>

<main>
  <div class="form-container">
    <h2>Add New Saving</h2>
    <p>Fill in the details below to create a new saving goal.</p>
  
    <form [formGroup]="addSavingForm">
      <div class="first-row">
        <div class="mb-3">
          <label for="saving_name" class="form-label">Saving Name</label>
          <div class="input-group">
            <i class="bi bi-piggy-bank input-group-text"></i>
            <input 
              type="text" 
              class="form-control" 
              id="saving_name" 
              formControlName="name"
              placeholder="Enter saving name"/>
          </div>
          
          <!-- Validator Indicator -->
          @if(addSavingForm.get('name')?.touched && 
            addSavingForm.get('name')?.invalid) 
          {
            <div class="text-danger mt-1">
              Saving Name is required.
            </div>
          }
        </div>
    
        <div class="mb-3">
          <label for="target_amount" class="form-label">Target Amount</label>

          <div class="input-group">
            <i class="bi bi-currency-dollar input-group-text"></i>
            <input 
              type="number" 
              class="form-control" 
              id="target_amount" 
              formControlName="target_amount"
              placeholder="Enter target amount"/>
          </div>

          <!-- Validator Indicator -->
          @if(addSavingForm.get('target_amount')?.touched && 
            addSavingForm.get('target_amount')?.invalid) 
          {
            @if(addSavingForm.get('target_amount')?.errors?.['required']) {
              <div class="text-danger mt-1">
                Target Amount is required.
              </div>
            } @else if(addSavingForm.get('target_amount')?.errors?.['min']) {
              <div class="text-danger mt-1">
                Target Amount must be at least 1.
              </div>
            }
          }
        </div>
      </div>
      
      <div class="second-row">
        <div class="mb-3">
          <label for="frequency" class="form-label">Frequency</label>

          <div class="input-group">
            <i class="bi bi-clock-history input-group-text"></i>
            <select 
                class="form-select" 
                id="frequency" 
                formControlName="frequency">
              <option value="" disabled selected>Select frequency</option>
              <option value="Daily">Daily</option>
              <option value="Weekly">Weekly</option>
              <option value="Monthly">Monthly</option>
            </select>
          </div>

          <!-- Validator Indicator -->
          @if(addSavingForm.get('frequency')?.touched && 
            addSavingForm.get('frequency')?.invalid) 
          {
            <div class="text-danger mt-1">
              Frequency is required.
            </div>
          }
        </div>

        <div class="mb-3">
          <label for="goal_date" class="form-label">Goal Date</label>

          <div class="input-group">
            <i class="bi bi-calendar-event input-group-text"></i>
            <input 
            type="date" 
            class="form-control" 
            formControlName="goal_date"
            id="goal_date"/>
          </div>

          <!-- Validator Indicator -->
          @if(addSavingForm.get('goal_date')?.touched && 
            addSavingForm.get('goal_date')?.invalid) 
          {
            <div class="text-danger mt-1">
              Goal Date is required.
            </div>
          }
        </div>
      </div>
  
      <!-- <div class="mb-3">
        <label for="current_amount" class="form-label">Current Amount</label>

        <div class="input-group">
          <i class="bi bi-currency-dollar input-group-text"></i>
          <input 
            type="number" 
            class="form-control" 
            id="current_amount" 
            placeholder="0.00"
            formControlName="current_amount"
            title="This is readonly and cannot be changed manually."
            readonly/>
        </div>
      </div> -->

      <div>
        <label for="description" class="form-label">Description</label>
        <textarea 
          class="form-control" 
          id="description" 
          rows="3"
          formControlName="description"
          placeholder="Enter description (optional)"></textarea>
      </div>

      <button
      type="button"
      class="btn btn-secondary mt-2 me-2"
      routerLink="/savings">
        Cancel
      </button>
  
      <button 
        type="button" 
        class="btn btn-primary mt-2"
        (click)="addSaving()">
          Save
      </button>
    </form>
  </div>
</main>