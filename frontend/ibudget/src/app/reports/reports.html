<app-sidebar></app-sidebar>
<app-header></app-header>

<main class="reports-container">
  <!-- Financial Summary Section -->
  <section class="summary-section">
    <div class="summary-cards">
      <div class="summary-card">
        <h3>Total Income</h3>
        <p class="amount">
          {{ totalIncome | currency:'PHP':'symbol':'1.0-0' }}
        </p>
      </div>
      <div class="summary-card">
        <h3>Total Expenses</h3>
        <p class="amount">
          {{ totalExpenses | currency:'PHP':'symbol':'1.0-0' }}
        </p>
      </div>
      <div class="summary-card">
        <h3>Net Savings</h3>
        <p class="amount" [class.negative]="netSavings < 0">
          {{ netSavings | currency:'PHP':'symbol':'1.0-0' }}
        </p>
      </div>
      <div class="summary-card">
        <h3>Budget Adherence</h3>
        <p class="percentage">{{ budgetAdherence | number:'1.0-0' }}%</p>
      </div>
    </div>
  </section>

  <!-- Period Filter -->
  <section class="filter-section">
    <h3>View Reports By:
      <select
        [(ngModel)]="selectedPeriod"
        (ngModelChange)="setPeriod($event)"
        class="period-select">
          <option value="daily">Daily</option>
          <option value="weekly">Weekly</option>
          <option value="monthly">Monthly</option>
      </select>
    </h3>
  </section>

  <section class="report-section">
    <h2>Expense Report</h2>
    <div class="table-wrapper">
      <table class="report-table">
        <thead>
          <tr>
            <th>Category</th>
            <th>Current Amount</th>
            <th>Allocated Amount</th>
            <th>Percentage Used</th>
          </tr>
        </thead>
        <tbody>
          @for (expense of expenses; track expense.name) {
            <tr [class.overspent]="isOverspent(expense)">
              <td>{{ expense.name }}</td>
              <td>
                {{ expense.currentAmount | currency:'PHP':'symbol':'1.0-0' }}
              </td>
              <td>
                {{ expense.allocatedAmount | currency:'PHP':'symbol':'1.0-0' }}
              </td>
              <td>{{ expense.percentageUsed }}%</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </section>

  <section class="report-section">
    <h2>Income Report</h2>
    <div class="table-wrapper">
      <table class="report-table">
        <thead>
          <tr>
            <th>Source</th>
            <th>Current Amount</th>
            <th>Total Amount</th>
            <th>Percentage Completed</th>
          </tr>
        </thead>
        <tbody>
          @for (inc of income; track inc.name) {
            <tr>
              <td>{{ inc.name }}</td>
              <td>{{ inc.currentAmount | currency:'PHP':'symbol':'1.0-0' }}</td>
              <td>{{ inc.amount | currency:'PHP':'symbol':'1.0-0' }}</td>
              <td>{{ inc.percentageCompleted }}%</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </section>
</main>
