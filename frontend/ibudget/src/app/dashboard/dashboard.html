<app-toggleable-sidebar/>
<app-header></app-header>

<main class="dashboard-container">
  <!-- Greeting Panel -->
  <div class="card greeting-panel">
    <div class="card-body">
      <div>
        <h1>Welcome to iBudget!</h1>
        <h2>Let's get you started.</h2>
      </div>

      <div class="logo-container">
        <img src="assets/images/coin.png" alt="iBudget Logo" />
      </div>
    </div>
  </div>

  <!-- Recent Activity Panel -->
  <div class="card recent-activity-panel">
    <div class="card-body">
      <div class="panel-header">
        <h3>Recent Activity</h3>
        <a routerLink="/transactions" class="view-all">View All</a>
      </div>

      <!-- Recent Activity List -->
      <div class="activity-list-container">
        @if (isLoading()) {
          <div class="loading-state">
            <div 
              class="spinner-border spinner-border-sm text-secondary" 
              role="status"></div>
            <span>Loading...</span>
          </div>
        } @else if (recentTransactions().length === 0) {
          <div class="empty-state">
            <i class="bi bi-receipt"></i>
            <p>No recent activity</p>
          </div>
        } @else {
          <div class="activity-list">
            @for (tx of recentTransactions(); track tx.id) {
              <div class="activity-item">
                <div class="item-left">
                  <div 
                    class="icon-circle" 
                    [class.income]="tx.type === 'income'" 
                    [class.expense]="tx.type === 'expense'">
                    <i 
                      [class]="tx.type === 'income' ? 
                      'bi bi-arrow-down-left' : 
                      'bi bi-arrow-up-right'"></i>
                  </div>
                  <div class="item-info">
                    <span class="description">{{ tx.description }}</span>
                    <span 
                      class="date">
                        {{ tx.transactionDate | date:'MMM d' }}
                    </span>
                  </div>
                </div>
                <div 
                  class="item-amount" 
                  [class.income]="tx.type === 'income'" 
                  [class.expense]="tx.type === 'expense'">
                    {{ tx.type === 'income' ? '+' : '-' }} 
                    {{ tx.amount | currency:'PHP':'symbol':'1.0-0' }}
                </div>
              </div>
            }
          </div>
        }
      </div>
    </div>
  </div>

  <!-- Set Transaction Panel -->
  <div class="card add-transaction-panel">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h3>Add your transactions</h3>
        <p>
          Use the "Add Transaction" button to start tracking your 
          income and expenses.
        </p>

        <a class="btn transaction-button btn-primary" routerLink="/transactions">
          Add Transaction
        </a>
      </div>

      <div class="icon-container">
        <i class="fas fa-plus-circle fa-5x"></i>
      </div>
    </div>
  </div>

  <!-- Set Budget Panel -->
  <div class="card add-budget-panel btn-primary">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h3>Set your budget</h3>
        <p>
          Define your monthly budget to help manage your spending 
          effectively.
        </p>

        <a class="btn budget-button btn-primary" routerLink="/budgets">
          Set Budget
        </a>
      </div>

      <div class="icon-container">
        <i class="fas fa-wallet fa-5x"></i>
      </div>
    </div>
  </div>

  <!-- Set Saving Panel -->
  <div class="card add-saving-panel">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h3>Start saving</h3>
        <p>
          Create a savings goal to help you reach your financial 
          objectives.
        </p>

        <a class="btn saving-button btn-primary" routerLink="/savings">
          Create Saving Goal
        </a>
      </div>

      <div class="icon-container">
        <i class="fas fa-piggy-bank fa-5x"></i>
      </div>
    </div>
  </div>

  <!-- Reports Panel -->
  <div class="card reports-panel">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h3>View Reports</h3>
        <p>
          Access detailed reports to analyze your financial habits and 
          make informed decisions.
        </p>

        <a class="btn report-button btn-primary" routerLink="/reports">
          View Reports
        </a>
      </div>

      <div class="icon-container">
        <i class="fas fa-chart-line fa-5x"></i>
      </div>
    </div>
  </div>

  <!-- Notifications Panel -->
  <div class="card notifications-panel">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div>
        <h3>Smart Notifications</h3>
        <p>
          System sends you notifications to stay updated on your budget and 
          transaction activities.
        </p>
      </div>
      
      <div class="icon-container">
        <i class="fas fa-bell fa-5x"></i>
      </div>
    </div>
  </div>
  
  <!-- Chatbot Panel -->
  <div class="card chatbot-panel">
    <div class="card-body d-flex justify-content-between align-items-center">
      <div class="chatbot-container">
        <h3>Chat with Bonzi</h3>
        <p>
          Talk to <span class="fw-bold">Bonzi</span> chatbot to get 
          answers to your questions about financial topics and tips.
        </p>
      </div>

      <div class="chatbot-img-container">
        <img src="assets/images/kamen-rider-gotchard.jpg" alt="Bonzi Chatbot" />
      </div>
    </div>
  </div>
</main>