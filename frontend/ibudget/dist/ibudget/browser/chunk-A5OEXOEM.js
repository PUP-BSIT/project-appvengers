import{a as R}from"./chunk-RZU52TYJ.js";import{d as G,e as V}from"./chunk-6ODX6TS2.js";import"./chunk-HPCBQTSM.js";import"./chunk-NYHJAWNZ.js";import{a as w,b as m,c as h,d as E,g as F,h as N,i as q,j as k,k as T,l as U,m as D,q as I,s as A}from"./chunk-R4J5TFSL.js";import{a as y}from"./chunk-H4HKKKHV.js";import{B as P,C as b,z as O}from"./chunk-OQ6H4KVU.js";import{$a as S,Fb as M,Gb as C,La as u,Pb as i,U as g,ha as f,nb as l,ob as d,tb as x,ub as t,vb as e,wb as c}from"./chunk-DFJZCQ6A.js";import"./chunk-DAQOROHW.js";function H(o,n){o&1&&(t(0,"div",8),i(1," Saving Name is required. "),e())}function Y(o,n){o&1&&(t(0,"div",8),i(1," Target Amount is required. "),e())}function j(o,n){o&1&&(t(0,"div",8),i(1," Target Amount must be at least 1. "),e())}function L(o,n){if(o&1&&l(0,Y,2,0,"div",8)(1,j,2,0,"div",8),o&2){let a,r=C();d(!((a=r.updateSavingForm.get("target_amount"))==null||a.errors==null)&&a.errors.required?0:!((a=r.updateSavingForm.get("target_amount"))==null||a.errors==null)&&a.errors.min?1:-1)}}function W(o,n){o&1&&(t(0,"div",8),i(1," Frequency is required. "),e())}function z(o,n){o&1&&(t(0,"div",8),i(1," Goal Date is required. "),e())}function J(o,n){o&1&&(t(0,"div",8),i(1," Goal Date must be in the future. "),e())}function K(o,n){if(o&1&&l(0,z,2,0,"div",8)(1,J,2,0,"div",8),o&2){let a,r=C();d(!((a=r.updateSavingForm.get("goal_date"))==null||a.errors==null)&&a.errors.required?0:!((a=r.updateSavingForm.get("goal_date"))==null||a.errors==null)&&a.errors.pastDate?1:-1)}}function Q(o){if(!o.value)return null;let n=new Date(o.value),a=new Date;return a.setHours(0,0,0,0),n<a?{pastDate:!0}:null}var B=class o{savingService=g(R);activatedRoute=g(O);router=g(P);updateSavingForm;formBuilder=g(I);currentSaving=f({});savingId=f(1);constructor(){this.updateSavingForm=this.formBuilder.group({name:["",{validators:[m.required]}],goal_date:["",{validators:[m.required,Q]}],frequency:["",{validators:[m.required]}],target_amount:["",{validators:[m.required,m.min(1)]}],current_amount:[""],description:[""],header_color:[""],created_at:[""],updated_at:[""],deleted_at:[""]})}ngOnInit(){let n=this.activatedRoute.snapshot.paramMap.get("id")??"";this.savingId.set(+n),this.getSavingsData()}getSavingsData(){this.savingService.getSavingById(+this.savingId()).subscribe(n=>{y.production||console.log("Fetched saving data:",n),this.updateSavingForm.setValue({name:n.name,goal_date:n.goal_date,frequency:n.frequency,target_amount:Number(n.target_amount),current_amount:Number(n.current_amount),description:n.description,header_color:n.header_color,created_at:n.created_at,updated_at:n.updated_at,deleted_at:n.deleted_at})})}updateSaving(){let n=this.updateSavingForm.value;if(!this.updateSavingForm.valid){this.updateSavingForm.markAllAsTouched(),console.error("Form is invalid");return}this.savingService.updateSaving(this.savingId(),n).subscribe({next:()=>{this.router.navigate(["/savings"],{state:{toastMessage:"Saving updated successfully!",toastType:"success"}})},error:a=>{console.error("Error updating saving:",a),this.router.navigate(["/savings"],{state:{toastMessage:"Error updating saving. Please try again.",toastType:"error"}})}})}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=S({type:o,selectors:[["app-update-saving"]],decls:72,vars:5,consts:[[1,"form-container"],[3,"formGroup"],[1,"first-row"],[1,"mb-3"],["for","saving_name",1,"form-label"],[1,"input-group"],[1,"bi","bi-piggy-bank","input-group-text"],["type","text","id","saving_name","formControlName","name","placeholder","Enter saving name",1,"form-control"],[1,"text-danger","mt-1"],["for","target_amount",1,"form-label"],[1,"bi","bi-currency-dollar","input-group-text"],["type","number","id","target_amount","formControlName","target_amount","placeholder","Enter target amount",1,"form-control"],[1,"second-row"],["for","frequency",1,"form-label"],[1,"bi","bi-clock-history","input-group-text"],["id","frequency","formControlName","frequency",1,"form-select"],["value","","disabled","","selected",""],["value","Daily"],["value","Weekly"],["value","Monthly"],["for","goal_date",1,"form-label"],[1,"bi","bi-calendar-event","input-group-text"],["type","date","formControlName","goal_date","id","goal_date",1,"form-control"],["for","header_color",1,"form-label"],["formControlName","header_color","id","header_color",1,"form-select"],["value","bg-dark"],["value","bg-yellow"],["value","bg-danger"],["value","bg-success"],["value","bg-primary"],["for","description",1,"form-label"],["id","description","rows","3","formControlName","description","placeholder","Enter description (optional)",1,"form-control"],[1,"actions-container","d-flex","gap-2","align-items-center","mt-2"],["routerLink","/savings",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(a,r){if(a&1&&(c(0,"app-toggleable-sidebar")(1,"app-header"),t(2,"main")(3,"div",0)(4,"h2"),i(5,"Update Saving"),e(),t(6,"p"),i(7,"Fill in the details below to update your saving goal."),e(),t(8,"form",1)(9,"div",2)(10,"div",3)(11,"label",4),i(12,"Saving Name"),e(),t(13,"div",5),c(14,"i",6)(15,"input",7),e(),l(16,H,2,0,"div",8),e(),t(17,"div",3)(18,"label",9),i(19,"Target Amount"),e(),t(20,"div",5),c(21,"i",10)(22,"input",11),e(),l(23,L,2,1),e()(),t(24,"div",12)(25,"div",3)(26,"label",13),i(27,"Frequency"),e(),t(28,"div",5),c(29,"i",14),t(30,"select",15)(31,"option",16),i(32,"Select frequency"),e(),t(33,"option",17),i(34,"Daily"),e(),t(35,"option",18),i(36,"Weekly"),e(),t(37,"option",19),i(38,"Monthly"),e()()(),l(39,W,2,0,"div",8),e(),t(40,"div",3)(41,"label",20),i(42,"Goal Date"),e(),t(43,"div",5),c(44,"i",21)(45,"input",22),e(),l(46,K,2,1),e()(),t(47,"div",3)(48,"label",23),i(49,"Header Color"),e(),t(50,"select",24)(51,"option",16),i(52,"Select a color"),e(),t(53,"option",25),i(54,"Dark (Default)"),e(),t(55,"option",26),i(56,"Yellow"),e(),t(57,"option",27),i(58,"Red"),e(),t(59,"option",28),i(60,"Green"),e(),t(61,"option",29),i(62,"Blue"),e()()(),t(63,"div")(64,"label",30),i(65,"Description"),e(),c(66,"textarea",31),e(),t(67,"div",32)(68,"button",33),i(69," Cancel "),e(),t(70,"button",34),M("click",function(){return r.updateSaving()}),i(71," Update "),e()()()()()),a&2){let p,s,_,v;u(8),x("formGroup",r.updateSavingForm),u(8),d((p=r.updateSavingForm.get("name"))!=null&&p.touched&&((p=r.updateSavingForm.get("name"))!=null&&p.invalid)?16:-1),u(7),d((s=r.updateSavingForm.get("target_amount"))!=null&&s.touched&&((s=r.updateSavingForm.get("target_amount"))!=null&&s.invalid)?23:-1),u(16),d((_=r.updateSavingForm.get("frequency"))!=null&&_.touched&&((_=r.updateSavingForm.get("frequency"))!=null&&_.invalid)?39:-1),u(7),d((v=r.updateSavingForm.get("goal_date"))!=null&&v.touched&&((v=r.updateSavingForm.get("goal_date"))!=null&&v.invalid)?46:-1)}},dependencies:[G,b,A,F,U,D,w,N,T,h,E,q,k,V],styles:["@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}main[_ngcontent-%COMP%]{margin-left:80px;background-color:#f9fafb;padding:30px;height:auto;margin-top:70px}.form-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;border:1px solid #ccc;border-radius:8px;background-color:#f9f9f9;box-shadow:0 2px 4px #0000001a}.first-row[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:15px;justify-content:space-between}.first-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:320px}.first-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%]{width:310px}.first-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::picker(select), .second-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::picker(select){appearance:none;width:320px;overflow:hidden}.first-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::picker(select), .second-row[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::picker(select){text-overflow:ellipsis;border:0;margin:0;box-shadow:0 0 5px #00000026}.first-row[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{font-size:14px;padding:8px 12px}@media (max-width: 320px){main[_ngcontent-%COMP%]{margin-left:0;padding:10px}.form-container[_ngcontent-%COMP%]{padding:20px}.first-row[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.first-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80%}}@media (min-width: 321px) and (max-width: 768px){main[_ngcontent-%COMP%]{margin-left:0;padding:10px}.form-container[_ngcontent-%COMP%]{padding:20px}.first-row[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.first-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .first-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   input[type=date][_ngcontent-%COMP%], .second-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:80%}}"]})};export{B as UpdateSaving};
