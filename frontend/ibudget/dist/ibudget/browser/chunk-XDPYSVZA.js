import{a as D}from"./chunk-NV3OURT6.js";import{a as T}from"./chunk-V72SMRXO.js";import{d as N,e as I}from"./chunk-6ODX6TS2.js";import"./chunk-HPCBQTSM.js";import{c as v}from"./chunk-NYHJAWNZ.js";import{a as y,b as C,c as S,d as w,g as E,i as k,j as z,q as F,s as A}from"./chunk-R4J5TFSL.js";import"./chunk-H4HKKKHV.js";import{h}from"./chunk-OQ6H4KVU.js";import{$a as O,Cb as P,Fb as _,Gb as m,La as s,Pb as r,Qb as p,U as f,Z as x,_ as M,ha as g,nb as l,ob as d,tb as b,ub as t,vb as n,wb as o}from"./chunk-DFJZCQ6A.js";import"./chunk-DAQOROHW.js";function j(a,i){if(a&1){let c=P();t(0,"div",18)(1,"div",36),o(2,"i",37),n(),t(3,"div",38)(4,"span"),r(5),n()(),t(6,"button",39),_("click",function(){x(c);let u=m();return M(u.successMessage.set(null))}),o(7,"i",40),n()()}if(a&2){let c=m();s(5),p(c.successMessage())}}function L(a,i){if(a&1){let c=P();t(0,"div",19)(1,"div",36),o(2,"i",41),n(),t(3,"div",38)(4,"span"),r(5),n()(),t(6,"button",39),_("click",function(){x(c);let u=m();return M(u.errorMessage.set(null))}),o(7,"i",40),n()()}if(a&2){let c=m();s(5),p(c.errorMessage())}}function U(a,i){a&1&&(t(0,"span",26),o(1,"i",42),r(2," Username is required "),n())}function Y(a,i){a&1&&(t(0,"span",26),o(1,"i",42),r(2," Email is required "),n())}function q(a,i){a&1&&(t(0,"span",26),o(1,"i",42),r(2," Please enter a valid email address "),n())}function G(a,i){a&1&&(o(0,"span",43),t(1,"span"),r(2,"Saving..."),n())}function B(a,i){a&1&&(o(0,"i",44),t(1,"span"),r(2,"Save Changes"),n())}var V=class a{accountSettingsForm;formBuilder=f(F);authService=f(v);userService=f(D);usernameFirstLetter=g("");userName=g("");isSubmitting=g(!1);successMessage=g(null);errorMessage=g(null);constructor(){this.accountSettingsForm=this.formBuilder.group({email:["",{validators:[C.required,C.email]}],username:["",{validators:[C.required]}]})}ngOnInit(){this.getUserInformation(),this.getFirstLetter()}get email(){return this.accountSettingsForm.get("email")}get username(){return this.accountSettingsForm.get("username")}getFirstLetter(){let i=this.userName().charAt(0).toUpperCase();this.usernameFirstLetter.set(i)}getUserInformation(){this.authService.getProfile().subscribe(i=>{i.success&&i.data&&(this.accountSettingsForm.patchValue({email:i.data.email,username:i.data.username}),this.userName.set(i.data.username),this.getFirstLetter())})}onSubmit(){if(this.successMessage.set(null),this.errorMessage.set(null),this.accountSettingsForm.invalid){Object.keys(this.accountSettingsForm.controls).forEach(e=>{this.accountSettingsForm.get(e)?.markAsTouched()});return}this.isSubmitting.set(!0);let i=this.accountSettingsForm.value,c={username:i.username,email:i.email};this.userService.updateAccount(c).subscribe({next:e=>{this.isSubmitting.set(!1),e.success?this.successMessage.set(e.message):this.errorMessage.set(e.message)},error:e=>{this.isSubmitting.set(!1),this.errorMessage.set(e.error?.message||"Failed to update account. Please try again.")}})}static \u0275fac=function(c){return new(c||a)};static \u0275cmp=O({type:a,selectors:[["app-account"]],decls:62,vars:10,consts:[[1,"settings-container"],[1,"page-header"],[1,"header-content"],[1,"header-icon"],[1,"bi","bi-person-gear"],[1,"header-text"],[1,"settings-card"],[1,"card-header"],[1,"card-body"],[1,"profile-section"],[1,"avatar-wrapper"],[1,"avatar"],[1,"avatar-overlay"],[1,"bi","bi-camera"],[1,"profile-info"],[1,"profile-name"],[1,"profile-role"],[1,"divider"],[1,"alert","alert-success"],[1,"alert","alert-danger"],[1,"settings-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],[1,"bi","bi-person"],[1,"input-wrapper"],["formControlName","username","id","username","placeholder","Enter your username","type","text","autocomplete","username",1,"form-input"],[1,"error-message"],["for","email"],[1,"bi","bi-envelope"],["formControlName","email","id","email","placeholder","Enter your email","type","email","autocomplete","email",1,"form-input"],[1,"form-actions"],["type","submit",1,"btn-primary-submit",3,"disabled"],[1,"info-card"],[1,"info-icon"],[1,"bi","bi-info-circle"],[1,"info-content"],[1,"alert-icon"],[1,"bi","bi-check-circle-fill"],[1,"alert-content"],["type","button","aria-label","Close",1,"alert-close",3,"click"],[1,"bi","bi-x-lg"],[1,"bi","bi-exclamation-circle-fill"],[1,"bi","bi-exclamation-triangle"],[1,"spinner"],[1,"bi","bi-check2"]],template:function(c,e){c&1&&(o(0,"app-toggleable-sidebar")(1,"app-header")(2,"app-sub-header"),t(3,"main")(4,"div",0)(5,"div",1)(6,"div",2)(7,"div",3),o(8,"i",4),n(),t(9,"div",5)(10,"h1"),r(11,"Account Settings"),n(),t(12,"p"),r(13,"Manage your personal information and account details"),n()()()(),t(14,"div",6)(15,"div",7)(16,"h2"),r(17,"Personal Information"),n(),t(18,"p"),r(19,"Update your profile details and contact information"),n()(),t(20,"div",8)(21,"div",9)(22,"div",10)(23,"div",11)(24,"span"),r(25),n()(),t(26,"div",12),o(27,"i",13),n()(),t(28,"div",14)(29,"span",15),r(30),n(),t(31,"span",16),r(32,"iBudget Member"),n()()(),o(33,"div",17),l(34,j,8,1,"div",18),l(35,L,8,1,"div",19),t(36,"form",20),_("ngSubmit",function(){return e.onSubmit()}),t(37,"div",21)(38,"label",22),o(39,"i",23),r(40," Username "),n(),t(41,"div",24),o(42,"input",25),n(),l(43,U,3,0,"span",26),n(),t(44,"div",21)(45,"label",27),o(46,"i",28),r(47," Email Address "),n(),t(48,"div",24),o(49,"input",29),n(),l(50,Y,3,0,"span",26),l(51,q,3,0,"span",26),n(),t(52,"div",30)(53,"button",31),l(54,G,3,0)(55,B,3,0),n()()()()(),t(56,"div",32)(57,"div",33),o(58,"i",34),n(),t(59,"div",35)(60,"p"),r(61,"Your account is secured with JWT authentication. Changes to your profile are saved automatically upon submission."),n()()()()()),c&2&&(s(25),p(e.usernameFirstLetter()),s(5),p(e.userName()),s(4),d(e.successMessage()?34:-1),s(),d(e.errorMessage()?35:-1),s(),b("formGroup",e.accountSettingsForm),s(7),d(!(e.username==null||e.username.errors==null)&&e.username.errors.required&&(e.username!=null&&e.username.touched)?43:-1),s(7),d(!(e.email==null||e.email.errors==null)&&e.email.errors.required&&(e.email!=null&&e.email.touched)?50:-1),s(),d(!(e.email==null||e.email.errors==null)&&e.email.errors.email&&(e.email!=null&&e.email.touched)?51:-1),s(2),b("disabled",e.isSubmitting()||e.accountSettingsForm.invalid||e.accountSettingsForm.pristine),s(),d(e.isSubmitting()?54:55))},dependencies:[N,A,E,y,S,w,k,z,T,h,I],styles:["@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}main[_ngcontent-%COMP%]{margin-left:80px;background-color:#f9fafb;height:auto;display:flex;justify-content:center;padding:40px 24px;min-height:calc(100vh - 70px);margin-top:0}.settings-container[_ngcontent-%COMP%]{width:100%;max-width:640px;display:flex;flex-direction:column;gap:24px}.page-header[_ngcontent-%COMP%]{opacity:0;animation:_ngcontent-%COMP%_fadeSlideIn .4s cubic-bezier(.22,1,.36,1) both;animation-delay:0ms}@media (prefers-reduced-motion: reduce){.page-header[_ngcontent-%COMP%]{animation:none!important;transition:none!important;opacity:1!important;transform:none!important}}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:14px;background:linear-gradient(135deg,#6f42c1,#8b5cf6);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #6f42c140}.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;color:#fff}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#1f2937;margin:0 0 4px}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#9ca3af;margin:0}.settings-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:12px;box-shadow:0 1px 3px #0000001a,0 1px 2px #0000000f;transition:box-shadow .3s cubic-bezier(.4,0,.2,1),transform .3s cubic-bezier(.4,0,.2,1);opacity:0;animation:_ngcontent-%COMP%_fadeSlideIn .4s cubic-bezier(.22,1,.36,1) both;animation-delay:.1s}.settings-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px #0000001a,0 2px 4px #0000000f}@media (prefers-reduced-motion: reduce){.settings-card[_ngcontent-%COMP%]{animation:none!important;transition:none!important;opacity:1!important;transform:none!important}}.settings-card[_ngcontent-%COMP%]{overflow:hidden}.settings-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:24px 28px;border-bottom:1px solid #e5e7eb;background:linear-gradient(180deg,#fafafa,#fff)}.settings-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1f2937;margin:0 0 4px}.settings-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#9ca3af;margin:0}.settings-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:28px}.profile-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:20px;padding:20px;background:#f9fafb;border-radius:8px;margin-bottom:8px}.avatar-wrapper[_ngcontent-%COMP%]{position:relative;cursor:pointer}.avatar-wrapper[_ngcontent-%COMP%]:hover   .avatar-overlay[_ngcontent-%COMP%]{opacity:1}.avatar-wrapper[_ngcontent-%COMP%]:hover   .avatar[_ngcontent-%COMP%]{transform:scale(1.02)}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#6f42c1,#8b5cf6);display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #6f42c133;transition:transform .15s ease-in-out}.avatar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:#fff;text-transform:uppercase}.avatar-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;border-radius:50%;background:#00000080;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .15s ease-in-out}.avatar-overlay[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;color:#fff}.profile-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px}.profile-info[_ngcontent-%COMP%]   .profile-name[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1f2937}.profile-info[_ngcontent-%COMP%]   .profile-role[_ngcontent-%COMP%]{font-size:13px;color:#9ca3af}.divider[_ngcontent-%COMP%]{height:1px;background:#e5e7eb;margin:20px 0}.alert[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:8px;margin-bottom:20px;animation:_ngcontent-%COMP%_slideDown .3s ease-out}.alert.alert-success[_ngcontent-%COMP%]{background:#d1fae5;border:1px solid rgba(16,185,129,.2)}.alert.alert-success[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#10b981}.alert.alert-danger[_ngcontent-%COMP%]{background:#fee2e2;border:1px solid rgba(239,68,68,.2)}.alert.alert-danger[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#ef4444}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]{flex-shrink:0}.alert[_ngcontent-%COMP%]   .alert-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]{flex:1}.alert[_ngcontent-%COMP%]   .alert-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#1f2937}.alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]{flex-shrink:0;background:none;border:none;padding:4px;cursor:pointer;border-radius:4px;transition:background-color .15s ease-in-out}.alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]:hover{background:#0000001a}.alert[_ngcontent-%COMP%]   .alert-close[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px;color:#4b5563}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.settings-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;font-weight:500;color:#4b5563}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px;color:#9ca3af}.input-wrapper[_ngcontent-%COMP%]{position:relative}.form-input[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:8px;padding:12px 16px;font-size:15px;color:#1f2937;background-color:#fff;transition:border-color .15s ease-in-out,box-shadow .15s ease-in-out;width:100%}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-input[_ngcontent-%COMP%]:focus{border-color:#6f42c1;box-shadow:0 0 0 3px #a78bfa4d;outline:none}.form-input[_ngcontent-%COMP%]:disabled{background-color:#f3f4f6;cursor:not-allowed;color:#9ca3af}.form-input[_ngcontent-%COMP%]:focus + .input-focus-ring[_ngcontent-%COMP%]{opacity:1}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;color:#ef4444}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;padding-top:8px}.btn-primary-submit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6f42c1,#8b5cf6);border:none;border-radius:8px;padding:12px 24px;font-weight:600;color:#fff;cursor:pointer;transition:transform .15s ease-in-out,box-shadow .15s ease-in-out;display:inline-flex;align-items:center;justify-content:center;gap:8px;min-width:140px}.btn-primary-submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #6f42c14d}.btn-primary-submit[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-primary-submit[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.btn-primary-submit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}.btn-primary-submit[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.info-card[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;padding:16px 20px;background:#dbeafe;border:1px solid rgba(59,130,246,.15);border-radius:8px;opacity:0;animation:_ngcontent-%COMP%_fadeSlideIn .4s cubic-bezier(.22,1,.36,1) both;animation-delay:.2s}@media (prefers-reduced-motion: reduce){.info-card[_ngcontent-%COMP%]{animation:none!important;transition:none!important;opacity:1!important;transform:none!important}}.info-card[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{flex-shrink:0}.info-card[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px;color:#3b82f6}.info-card[_ngcontent-%COMP%]   .info-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;color:#4b5563;line-height:1.5;margin:0}@media (max-width: 768px){main[_ngcontent-%COMP%]{margin-left:0;padding:24px 16px}.settings-container[_ngcontent-%COMP%]{gap:20px}.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:12px}.page-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:20px}.page-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.settings-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%], .settings-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:20px}.profile-section[_ngcontent-%COMP%]{flex-direction:column;text-align:center;padding:24px 16px}.avatar[_ngcontent-%COMP%]{width:88px;height:88px}.avatar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:36px}.profile-info[_ngcontent-%COMP%]{align-items:center}}@media (max-width: 480px){main[_ngcontent-%COMP%]{padding:16px 12px}.page-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.settings-card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%], .settings-card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:16px}.form-actions[_ngcontent-%COMP%]{justify-content:stretch}.form-actions[_ngcontent-%COMP%]   .btn-primary-submit[_ngcontent-%COMP%]{width:100%}}@media (prefers-reduced-motion: reduce){.alert[_ngcontent-%COMP%], .spinner[_ngcontent-%COMP%]{animation:none}}"]})};export{V as Account};
