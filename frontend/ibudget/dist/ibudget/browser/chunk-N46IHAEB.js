import{c as A}from"./chunk-NYHJAWNZ.js";import{a as p}from"./chunk-H4HKKKHV.js";import{B as P,c as x,h as _,z as y}from"./chunk-OQ6H4KVU.js";import{$a as f,Cb as b,Fb as k,Gb as m,La as c,Pb as o,Rb as C,U as s,Z as d,_ as g,eb as h,ha as l,tb as u,ub as r,vb as a,wb as v}from"./chunk-DFJZCQ6A.js";import"./chunk-DAQOROHW.js";function O(t,n){t&1&&(r(0,"div",3)(1,"div",4)(2,"span",5),o(3,"Loading..."),a()(),r(4,"p",6),o(5,"Completing sign in..."),a()())}function S(t,n){if(t&1){let e=b();r(0,"div",7)(1,"div",8),v(2,"i",9),o(3),a(),r(4,"button",10),k("click",function(){d(e);let I=m();return g(I.navigateToLogin())}),o(5," Return to Login "),a()()}if(t&2){let e=m();c(3),C(" ",e.error()," ")}}var M=class t{isProcessing=l(!0);error=l("");router=s(P);route=s(y);authService=s(A);ngOnInit(){this.processCallback()}processCallback(){let n=this.route.snapshot.queryParamMap.get("token"),e=this.route.snapshot.queryParamMap.get("username"),i=this.route.snapshot.queryParamMap.get("error");if(i){this.isProcessing.set(!1),this.error.set("Authentication failed: "+i);return}if(!n){this.isProcessing.set(!1),this.error.set("No authentication token received");return}this.authService.handleOAuthCallback(n,e||""),p.production||console.log("OAuth token stored successfully"),setTimeout(()=>{p.production||console.log("OAuth callback successful, navigating to dashboard"),this.router.navigate(["/dashboard"],{replaceUrl:!0})},100)}navigateToLogin(){this.router.navigate(["/auth-page"])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=f({type:t,selectors:[["app-auth-callback"]],decls:3,vars:2,consts:[[1,"auth-callback-container"],["class","spinner-container",4,"ngIf"],["class","error-container",4,"ngIf"],[1,"spinner-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-3"],[1,"error-container"],["role","alert",1,"alert","alert-danger"],[1,"bi","bi-exclamation-triangle-fill","me-2"],[1,"btn","btn-primary",3,"click"]],template:function(e,i){e&1&&(r(0,"div",0),h(1,O,6,0,"div",1)(2,S,6,1,"div",2),a()),e&2&&(c(),u("ngIf",i.isProcessing()),c(),u("ngIf",i.error()))},dependencies:[_,x],styles:[".auth-callback-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh;background-color:#f8f9fa}.spinner-container[_ngcontent-%COMP%]{text-align:center}.error-container[_ngcontent-%COMP%]{text-align:center;padding:2rem}"]})};export{M as AuthCallback};
