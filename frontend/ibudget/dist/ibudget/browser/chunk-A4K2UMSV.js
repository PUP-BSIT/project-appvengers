import{a as z}from"./chunk-V72SMRXO.js";import{a as D,d as T,e as j}from"./chunk-6ODX6TS2.js";import"./chunk-HPCBQTSM.js";import"./chunk-NYHJAWNZ.js";import{l as k,m as N,r as V}from"./chunk-R4J5TFSL.js";import"./chunk-H4HKKKHV.js";import{h as S}from"./chunk-OQ6H4KVU.js";import{$a as O,Cb as P,Fb as m,Gb as s,La as c,Pb as i,Qb as w,Rb as b,U as M,Z as g,_ as p,ha as h,nb as x,ob as C,rb as y,sb as E,tb as _,ub as e,vb as n,wb as d}from"./chunk-DFJZCQ6A.js";import{a as u,b as v}from"./chunk-DAQOROHW.js";var I=(a,r)=>r.value;function L(a,r){a&1&&(e(0,"div",4)(1,"div",5)(2,"span",6),i(3,"Loading..."),n()()())}function K(a,r){if(a&1){let t=P();e(0,"div",7),d(1,"i",55),i(2),e(3,"button",56),m("click",function(){g(t);let o=s(2);return p(o.successMessage.set(null))}),n()()}if(a&2){let t=s(2);c(2),b(" ",t.successMessage()," ")}}function W(a,r){if(a&1){let t=P();e(0,"div",8),d(1,"i",57),i(2),e(3,"button",56),m("click",function(){g(t);let o=s(2);return p(o.errorMessage.set(null))}),n()()}if(a&2){let t=s(2);c(2),b(" ",t.errorMessage()," ")}}function B(a,r){if(a&1&&(e(0,"option",60),i(1),n()),a&2){let t=r.$implicit;_("value",t.value),c(),w(t.label)}}function R(a,r){if(a&1){let t=P();e(0,"div",36)(1,"label",58),i(2,"Remind me:"),n(),e(3,"select",59),m("change",function(o){g(t);let l=s(2);return p(l.updatePreference("savingsDeadlineDays",+o.target.value))}),y(4,B,2,2,"option",60,I),n()()}if(a&2){let t=s(2);c(3),_("value",t.getPreference("savingsDeadlineDays")),c(),E(t.deadlineDaysOptions)}}function G(a,r){a&1&&(d(0,"span",61),i(1," Saving... "))}function H(a,r){a&1&&(d(0,"i",62),i(1," Save Changes "))}function A(a,r){if(a&1){let t=P();x(0,K,4,1,"div",7),x(1,W,4,1,"div",8),e(2,"div",9)(3,"div",10)(4,"div",11)(5,"div",12),d(6,"i",13),n(),e(7,"div",14)(8,"h6",15),i(9,"Budget Notifications"),n(),e(10,"small",3),i(11,"Alerts about your budget spending"),n()()(),e(12,"div",16)(13,"div",17)(14,"div",18)(15,"div",19),d(16,"i",20),n(),e(17,"div",21)(18,"span",22),i(19,"Budget Warning"),n(),e(20,"small",23),i(21,"Get notified when spending reaches 50% of budget"),n()()(),e(22,"div",24)(23,"input",25),m("change",function(o){g(t);let l=s();return p(l.updatePreference("budgetWarningEnabled",o.target.checked))}),n()()(),e(24,"div",17)(25,"div",18)(26,"div",26),d(27,"i",27),n(),e(28,"div",21)(29,"span",22),i(30,"Budget Exceeded"),n(),e(31,"small",23),i(32,"Alert when you exceed your budget limit"),n()()(),e(33,"div",24)(34,"input",28),m("change",function(o){g(t);let l=s();return p(l.updatePreference("budgetExceededEnabled",o.target.checked))}),n()()(),e(35,"div",17)(36,"div",18)(37,"div",19),d(38,"i",29),n(),e(39,"div",21)(40,"span",22),i(41,"Budget Ending Soon"),n(),e(42,"small",23),i(43,"Reminder when budget period is ending"),n()()(),e(44,"div",24)(45,"input",30),m("change",function(o){g(t);let l=s();return p(l.updatePreference("budgetNearEndEnabled",o.target.checked))}),n()()()()(),e(46,"div",10)(47,"div",11)(48,"div",31),d(49,"i",32),n(),e(50,"div",14)(51,"h6",15),i(52,"Savings Notifications"),n(),e(53,"small",3),i(54,"Updates about your savings goals"),n()()(),e(55,"div",16)(56,"div",17)(57,"div",18)(58,"div",33),d(59,"i",34),n(),e(60,"div",21)(61,"span",22),i(62,"Deadline Reminders"),n(),e(63,"small",23),i(64,"Get reminded before savings deadlines"),n()()(),e(65,"div",24)(66,"input",35),m("change",function(o){g(t);let l=s();return p(l.updatePreference("savingsDeadlineEnabled",o.target.checked))}),n()()(),x(67,R,6,1,"div",36),e(68,"div",17)(69,"div",18)(70,"div",37),d(71,"i",38),n(),e(72,"div",21)(73,"span",22),i(74,"Milestone Confetti & Sound"),n(),e(75,"small",23),i(76,"Play celebration effects at 50% and 75% progress (notifications still send)"),n()()(),e(77,"div",24)(78,"input",39),m("change",function(o){g(t);let l=s();return p(l.updatePreference("savingsMilestoneEnabled",o.target.checked))}),n()()(),e(79,"div",17)(80,"div",18)(81,"div",40),d(82,"i",41),n(),e(83,"div",21)(84,"span",22),i(85,"Goal Completed Confetti & Sound"),n(),e(86,"small",23),i(87,"Play celebration effects when reaching your goal (notifications still send)"),n()()(),e(88,"div",24)(89,"input",42),m("change",function(o){g(t);let l=s();return p(l.updatePreference("savingsCompletedEnabled",o.target.checked))}),n()()()()(),e(90,"div",10)(91,"div",11)(92,"div",43),d(93,"i",44),n(),e(94,"div",14)(95,"h6",15),i(96,"Delivery Settings"),n(),e(97,"small",3),i(98,"How notifications are delivered"),n()()(),e(99,"div",16)(100,"div",17)(101,"div",18)(102,"div",45),d(103,"i",46),n(),e(104,"div",21)(105,"span",22),i(106,"Notification Sound"),n(),e(107,"small",23),i(108,"Play sound for new notifications"),n()()(),e(109,"div",24)(110,"input",47),m("change",function(o){g(t);let l=s();return p(l.updatePreference("soundEnabled",o.target.checked))}),n()()(),e(111,"div",17)(112,"div",18)(113,"div",48),d(114,"i",49),n(),e(115,"div",21)(116,"span",22),i(117,"Toast Popups"),n(),e(118,"small",23),i(119,"Show popup notifications on screen"),n()()(),e(120,"div",24)(121,"input",50),m("change",function(o){g(t);let l=s();return p(l.updatePreference("toastEnabled",o.target.checked))}),n()()()()()(),e(122,"div",51)(123,"button",52),m("click",function(){g(t);let o=s();return p(o.resetToDefaults())}),d(124,"i",53),i(125," Reset to Defaults "),n(),e(126,"button",54),m("click",function(){g(t);let o=s();return p(o.savePreferences())}),x(127,G,2,0)(128,H,2,0),n()()}if(a&2){let t=s();C(t.successMessage()?0:-1),c(),C(t.errorMessage()?1:-1),c(22),_("checked",t.getPreference("budgetWarningEnabled")),c(11),_("checked",t.getPreference("budgetExceededEnabled")),c(11),_("checked",t.getPreference("budgetNearEndEnabled")),c(21),_("checked",t.getPreference("savingsDeadlineEnabled")),c(),C(t.getPreference("savingsDeadlineEnabled")?67:-1),c(11),_("checked",t.getPreference("savingsMilestoneEnabled")),c(11),_("checked",t.getPreference("savingsCompletedEnabled")),c(21),_("checked",t.getPreference("soundEnabled")),c(11),_("checked",t.getPreference("toastEnabled")),c(2),_("disabled",t.isSaving()),c(3),_("disabled",t.isSaving()||!t.hasChanges()),c(),C(t.isSaving()?127:128)}}var F=class a{preferencesService=M(D);preferences=h({budgetWarningEnabled:!0,budgetExceededEnabled:!0,budgetNearEndEnabled:!0,savingsDeadlineEnabled:!0,savingsDeadlineDays:7,savingsMilestoneEnabled:!0,savingsCompletedEnabled:!0,soundEnabled:!0,toastEnabled:!0});isLoading=h(!0);isSaving=h(!1);successMessage=h(null);errorMessage=h(null);hasChanges=h(!1);originalPreferences=null;deadlineDaysOptions=[{value:1,label:"1 day before"},{value:3,label:"3 days before"},{value:7,label:"7 days before"},{value:14,label:"14 days before"}];ngOnInit(){this.loadPreferences()}loadPreferences(){this.isLoading.set(!0),this.preferencesService.getPreferences().subscribe({next:r=>{this.preferences.set(u({},r)),this.originalPreferences=u({},r),this.isLoading.set(!1)},error:r=>{console.error("Failed to load preferences:",r),this.errorMessage.set("Failed to load preferences"),this.isLoading.set(!1)}})}onPreferenceChange(){this.hasChanges.set(this.detectChanges()),this.successMessage.set(null)}detectChanges(){if(!this.originalPreferences)return!1;let r=this.preferences();return JSON.stringify(r)!==JSON.stringify(this.originalPreferences)}savePreferences(){this.isSaving.set(!0),this.successMessage.set(null),this.errorMessage.set(null),this.preferencesService.updatePreferences(this.preferences()).subscribe({next:r=>{this.originalPreferences=u({},r),this.hasChanges.set(!1),this.isSaving.set(!1),this.successMessage.set("Preferences saved successfully!")},error:r=>{console.error("Failed to save preferences:",r),this.errorMessage.set("Failed to save preferences. Please try again."),this.isSaving.set(!1)}})}resetToDefaults(){this.preferencesService.resetToDefaults().subscribe({next:r=>{this.preferences.set(u({},r)),this.originalPreferences=u({},r),this.hasChanges.set(!1),this.successMessage.set("Preferences reset to defaults!")},error:r=>{console.error("Failed to reset preferences:",r),this.errorMessage.set("Failed to reset preferences.")}})}updatePreference(r,t){this.preferences.update(f=>v(u({},f),{[r]:t})),this.onPreferenceChange()}getPreference(r){return this.preferences()[r]}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=O({type:a,selectors:[["app-notification-preferences"]],decls:12,vars:1,consts:[[1,"notification-preferences-panel"],[1,"info-container"],[1,"fw-semibold"],[1,"text-muted"],[1,"loading-container"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show","mx-auto","message-alert"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show","mx-auto","message-alert"],[1,"cards-container"],[1,"card"],[1,"card-header"],[1,"header-icon","budget"],[1,"fas","fa-wallet"],[1,"header-text"],[1,"fw-semibold","m-0"],[1,"card-body"],[1,"preference-item"],[1,"preference-info"],[1,"preference-icon","warning"],[1,"fas","fa-exclamation-triangle"],[1,"preference-text"],[1,"preference-title"],[1,"preference-desc"],[1,"form-check","form-switch"],["type","checkbox","role","switch","id","budgetWarning",1,"form-check-input",3,"change","checked"],[1,"preference-icon","alert"],[1,"fas","fa-bell"],["type","checkbox","role","switch","id","budgetExceeded",1,"form-check-input",3,"change","checked"],[1,"fas","fa-calendar-times"],["type","checkbox","role","switch","id","budgetNearEnd",1,"form-check-input",3,"change","checked"],[1,"header-icon","savings"],[1,"fas","fa-piggy-bank"],[1,"preference-icon","info"],[1,"fas","fa-clock"],["type","checkbox","role","switch","id","savingsDeadline",1,"form-check-input",3,"change","checked"],[1,"deadline-days-select"],[1,"preference-icon","milestone"],[1,"fas","fa-star"],["type","checkbox","role","switch","id","savingsMilestone",1,"form-check-input",3,"change","checked"],[1,"preference-icon","success"],[1,"fas","fa-trophy"],["type","checkbox","role","switch","id","savingsCompleted",1,"form-check-input",3,"change","checked"],[1,"header-icon","delivery"],[1,"fas","fa-paper-plane"],[1,"preference-icon","sound"],[1,"fas","fa-volume-up"],["type","checkbox","role","switch","id","soundEnabled",1,"form-check-input",3,"change","checked"],[1,"preference-icon","toast"],[1,"fas","fa-comment-alt"],["type","checkbox","role","switch","id","toastEnabled",1,"form-check-input",3,"change","checked"],[1,"action-buttons"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fas","fa-undo","me-2"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"fas","fa-check-circle","me-2"],["type","button",1,"btn-close",3,"click"],[1,"fas","fa-exclamation-circle","me-2"],[1,"form-label"],[1,"form-select",3,"change","value"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"fas","fa-save","me-2"]],template:function(t,f){t&1&&(d(0,"app-toggleable-sidebar")(1,"app-header")(2,"app-sub-header"),e(3,"main")(4,"div",0)(5,"div",1)(6,"h5",2),i(7,"Notification Preferences"),n(),e(8,"p",3),i(9," Customize which notifications you receive and how they're delivered. "),n()(),x(10,L,4,0,"div",4)(11,A,129,14),n()()),t&2&&(c(10),C(f.isLoading()?10:11))},dependencies:[S,V,k,N,T,z,j],styles:["@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}main[_ngcontent-%COMP%]{margin-left:80px;background-color:#f9fafb;height:auto;display:flex;justify-content:center;padding:30px 110px;margin-top:0}.notification-preferences-panel[_ngcontent-%COMP%]{padding:10px;height:auto;box-sizing:border-box;width:100%;max-width:900px}.info-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:20px}.info-container[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{margin:0 0 5px}.info-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:gray;text-align:center}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:300px}.message-alert[_ngcontent-%COMP%]{max-width:500px;margin-bottom:20px}.cards-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-bottom:30px}.card[_ngcontent-%COMP%]{border-radius:12px;box-shadow:0 2px 8px #00000014;border:1px solid #e9ecef;overflow:hidden}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:20px;background:linear-gradient(135deg,#f8f9fa,#fff);border-bottom:1px solid #e9ecef}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.2rem}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-icon.budget[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffecd2,#fcb69f);color:#e17055}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-icon.savings[_ngcontent-%COMP%]{background:linear-gradient(135deg,#a8edea,#fed6e3);color:#00b894}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-icon.delivery[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:1rem}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:.8rem}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:10px 20px 20px}.preference-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 0;border-bottom:1px solid #f0f0f0}.preference-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.preference-item[_ngcontent-%COMP%]   .preference-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.9rem}.preference-item[_ngcontent-%COMP%]   .preference-icon.warning[_ngcontent-%COMP%]{background:#fff3cd;color:#ffc107}.preference-item[_ngcontent-%COMP%]   .preference-icon.alert[_ngcontent-%COMP%]{background:#f8d7da;color:#dc3545}.preference-item[_ngcontent-%COMP%]   .preference-icon.info[_ngcontent-%COMP%]{background:#cfe2ff;color:#0d6efd}.preference-item[_ngcontent-%COMP%]   .preference-icon.milestone[_ngcontent-%COMP%]{background:#e2d9f3;color:#6f42c1}.preference-item[_ngcontent-%COMP%]   .preference-icon.success[_ngcontent-%COMP%]{background:#d1e7dd;color:#198754}.preference-item[_ngcontent-%COMP%]   .preference-icon.sound[_ngcontent-%COMP%]{background:#e7f1ff;color:#0d6efd}.preference-item[_ngcontent-%COMP%]   .preference-icon.toast[_ngcontent-%COMP%]{background:#f0f0f0;color:#6c757d}.preference-item[_ngcontent-%COMP%]   .preference-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.preference-item[_ngcontent-%COMP%]   .preference-text[_ngcontent-%COMP%]   .preference-title[_ngcontent-%COMP%]{font-weight:500;color:#333}.preference-item[_ngcontent-%COMP%]   .preference-text[_ngcontent-%COMP%]   .preference-desc[_ngcontent-%COMP%]{color:#6c757d;font-size:.8rem}.preference-item[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{width:3rem;height:1.5rem;cursor:pointer}.preference-item[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked{background-color:#0d6efd;border-color:#0d6efd}.preference-item[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 .25rem #0d6efd40}.threshold-slider[_ngcontent-%COMP%]{padding:15px 0 15px 48px;border-bottom:1px solid #f0f0f0}.threshold-slider[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.9rem;color:#555;margin-bottom:10px}.threshold-slider[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#0d6efd}.threshold-slider[_ngcontent-%COMP%]   .form-range[_ngcontent-%COMP%]{width:100%}.threshold-slider[_ngcontent-%COMP%]   .form-range[_ngcontent-%COMP%]::-webkit-slider-thumb{background:#0d6efd}.threshold-slider[_ngcontent-%COMP%]   .range-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:.75rem;color:#999;margin-top:5px}.deadline-days-select[_ngcontent-%COMP%]{padding:15px 0 15px 48px;border-bottom:1px solid #f0f0f0}.deadline-days-select[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{font-size:.9rem;color:#555;margin-bottom:8px;display:block}.deadline-days-select[_ngcontent-%COMP%]   .form-select[_ngcontent-%COMP%]{max-width:200px}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:15px;padding:20px 0}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:10px 25px;font-weight:500;border-radius:8px;display:flex;align-items:center}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.9rem}.action-buttons[_ngcontent-%COMP%]   .btn-outline-secondary[_ngcontent-%COMP%]:hover{background:#6c757d;color:#fff}.action-buttons[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.65}@media (max-width: 320px){main[_ngcontent-%COMP%]{margin-left:0;padding-left:5px;padding-right:5px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{padding:15px}.card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   .header-icon[_ngcontent-%COMP%]{width:38px;height:38px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:10px}.preference-item[_ngcontent-%COMP%]{flex-wrap:wrap;gap:10px}.preference-item[_ngcontent-%COMP%]   .preference-info[_ngcontent-%COMP%]{flex:1}.threshold-slider[_ngcontent-%COMP%], .deadline-days-select[_ngcontent-%COMP%]{padding-left:0}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (min-width: 321px) and (max-width: 376px){main[_ngcontent-%COMP%]{margin-left:0;padding-left:10px;padding-right:10px}.threshold-slider[_ngcontent-%COMP%], .deadline-days-select[_ngcontent-%COMP%]{padding-left:0}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}.action-buttons[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;justify-content:center}}@media (min-width: 377px) and (max-width: 768px){main[_ngcontent-%COMP%]{margin-left:0;padding-left:20px;padding-right:20px;margin-top:10px}.threshold-slider[_ngcontent-%COMP%], .deadline-days-select[_ngcontent-%COMP%]{padding-left:20px}}@media (min-width: 769px) and (max-width: 1024px){main[_ngcontent-%COMP%]{padding-left:50px;padding-right:50px;margin-top:10px}}"]})};export{F as NotificationPreferencesComponent};
