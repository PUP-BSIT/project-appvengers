import{a as ne}from"./chunk-DZECKHGY.js";import{c as ee}from"./chunk-I2VHBQM2.js";import{a as te}from"./chunk-RZU52TYJ.js";import{d as W,e as X}from"./chunk-6ODX6TS2.js";import"./chunk-HPCBQTSM.js";import"./chunk-NYHJAWNZ.js";import{a as H,c as Y,f as q,k as Z,l as J,m as K,r as U}from"./chunk-R4J5TFSL.js";import"./chunk-H4HKKKHV.js";import{B as G,C as $,b as Q,e as A,f as F,h as R}from"./chunk-OQ6H4KVU.js";import{$a as N,$b as L,Cb as h,Fb as f,Gb as p,Ib as z,Jb as I,Kb as V,La as o,Nb as b,Ob as j,Pb as r,Qb as P,Rb as v,U as S,Z as m,_ as u,ac as C,cc as M,ha as d,kc as w,lc as B,mb as _,nb as y,ob as k,qb as D,rb as E,sb as T,tb as x,ub as n,vb as i,wb as g}from"./chunk-DFJZCQ6A.js";import"./chunk-DAQOROHW.js";var ae=["savingsToast"],oe=(c,t)=>({"fas fa-check-circle":c,"bi bi-x-circle-fill":t}),re=(c,t)=>t.saving_id;function se(c,t){c&1&&(n(0,"div",15)(1,"div",24),g(2,"h5",25),i(),n(3,"div",26),g(4,"p",27),n(5,"div",28),g(6,"label",29)(7,"h6",30),i(),n(8,"div",31),g(9,"div",32),i(),n(10,"div",33),g(11,"p",34)(12,"p",34),i(),n(13,"div",28),g(14,"label",29)(15,"h6",34),i()()())}function ce(c,t){c&1&&(n(0,"div",16)(1,"div",35),g(2,"i",36),i(),n(3,"div",37)(4,"h3"),r(5,"No Savings Goals Yet"),i(),n(6,"p"),r(7,"Start your savings journey!"),i()()())}function ge(c,t){if(c&1&&(n(0,"div",15)(1,"div")(2,"h5",38),r(3),i()(),n(4,"div",26)(5,"p",39),r(6),i(),n(7,"div",28)(8,"label"),r(9,"Progress"),i(),n(10,"h6"),r(11),i()(),n(12,"div",31),g(13,"app-saving-progress",40),i(),n(14,"div",33)(15,"p"),r(16),C(17,"number"),i(),n(18,"p"),r(19),C(20,"number"),i()(),n(21,"div",28)(22,"label"),r(23,"Goal Date"),i(),n(24,"h6"),r(25),C(26,"date"),i()()(),n(27,"div",41)(28,"button",42),r(29," View Details "),i()()()),c&2){let e=t.$implicit,a=p();o(),j("card-header "+(e.header_color||"bg-dark")+" text-white"),o(2),P(e.name),o(3),v(" ",e.description||"No description available."," "),o(5),v("",a.getProgressPercentage(e),"%"),o(2),x("progressPercentage",a.getProgressPercentage(e)),o(3),v("\u20B1 ",M(17,10,e.current_amount,"1.0-0")),o(3),v("\u20B1 ",M(20,13,e.target_amount,"1.0-0")),o(6),P(M(26,16,e.goal_date,"MMM d, y")),o(3),x("routerLink","/savings/view-saving/"+e.saving_id)}}function le(c,t){if(c&1){let e=h();n(0,"li",44)(1,"button",51),f("click",function(){let s=m(e).$implicit,l=p(2);return u(l.goToPage(s))}),r(2),i()()}if(c&2){let e=t.$implicit,a=p(2);b("active",a.currentPage()===e),o(2),v("",e," ")}}function de(c,t){if(c&1){let e=h();n(0,"nav",17)(1,"ul",43)(2,"li",44)(3,"button",45),f("click",function(){m(e);let s=p();return u(s.prevPage())}),r(4,"\xAB "),i()(),E(5,le,3,3,"li",46,D),n(7,"li",44)(8,"button",47),f("click",function(){m(e);let s=p();return u(s.nextPage())}),r(9,"\xBB "),i()(),n(10,"li",48)(11,"span",49),r(12,"Page"),i(),n(13,"input",50),f("change",function(s){m(e);let l=p();return u(l.updateCurrentPage(s))}),i(),n(14,"span",49),r(15),i()()()()}if(c&2){let e=p();o(2),b("disabled",e.currentPage()===1),o(),_("tabindex",e.currentPage()===1?-1:0),o(2),T(e.getPageNumbers()),o(2),b("disabled",e.currentPage()===e.totalPages()),o(),_("tabindex",e.currentPage()===e.totalPages()?-1:0),o(5),x("value",e.currentPage()),_("max",e.totalPages()),o(2),v("of ",e.totalPages())}}var ie=class c{savingsToast;allSavings=d([]);savingsService=S(te);isLoading=d(!0);toastMessage=d("");toastType=d("success");router=S(G);searchQuery=d("");sortOption=d("name-asc");filteredSavings=w(()=>{let t=this.searchQuery().toLowerCase(),e=this.sortOption(),a=this.allSavings();return t&&(a=a.filter(s=>s.name.toLowerCase().includes(t)||s.description&&s.description.toLowerCase().includes(t))),[...a].sort((s,l)=>{switch(e){case"name-asc":return s.name.localeCompare(l.name);case"name-desc":return l.name.localeCompare(s.name);case"date-asc":return new Date(s.goal_date).getTime()-new Date(l.goal_date).getTime();case"date-desc":return new Date(l.goal_date).getTime()-new Date(s.goal_date).getTime();case"progress-asc":return this.getProgress(s)-this.getProgress(l);case"progress-desc":return this.getProgress(l)-this.getProgress(s);default:return 0}})});getProgress(t){let e=Number(t.target_amount),a=Number(t.current_amount);return!e||e<=0?0:a/e*100}pageSize=d(3);currentPage=d(1);constructor(){B(()=>{this.filteredSavings(),this.currentPage.set(1)})}paginatedSavings=w(()=>{let t=(this.currentPage()-1)*this.pageSize();return this.filteredSavings().slice(t,t+this.pageSize())});totalPages=w(()=>{let t=this.filteredSavings().length,e=Math.ceil(t/this.pageSize());return e>0?e:1});ngOnInit(){let t=history.state;if(t?.toastMessage){this.toastMessage.set(t.toastMessage),this.toastType.set(t.toastType??"success");let e=ee.getOrCreateInstance(this.savingsToast.nativeElement);e.show(),setTimeout(()=>{e.hide()},3e3),history.replaceState({},"",this.router.url)}this.getSavings()}getProgressPercentage(t){let e=Number(t.target_amount),a=Number(t.current_amount);return!e||e<=0?0:Math.min(Math.round(a/e*100),100)}getSavings(){this.savingsService.getSavings().subscribe({next:t=>{setTimeout(()=>{this.allSavings.set(t),this.currentPage.set(1),this.isLoading.set(!1)},1e3)},error:t=>{this.isLoading.set(!1),console.error("Error fetching savings:",t)}})}getPageNumbers(){return Array.from({length:this.totalPages()},(t,e)=>e+1)}goToPage(t){let e=Math.min(Math.max(t,1),this.totalPages());this.currentPage.set(e)}prevPage(){this.goToPage(this.currentPage()-1)}nextPage(){this.goToPage(this.currentPage()+1)}updateCurrentPage(t){let e=t.target,a=Number(e.value);Number.isNaN(a)?e.value=String(this.currentPage()):this.goToPage(a)}static \u0275fac=function(e){return new(e||c)};static \u0275cmp=N({type:c,selectors:[["app-savings"]],viewQuery:function(e,a){if(e&1&&z(ae,7),e&2){let s;I(s=V())&&(a.savingsToast=s.first)}},decls:40,vars:9,consts:[["savingsToast",""],[1,"inner-wrapper"],[1,"actions-container"],["type","text","placeholder","Search savings name",1,"savings-search-input",3,"ngModelChange","ngModel"],["routerLink","/savings/add-saving",1,"btn","btn-primary"],[1,"fas","fa-plus"],[1,"d-flex","justify-content-center"],[1,"form-select","savings-sort-select",3,"ngModelChange","ngModel"],["value","name-asc"],["value","name-desc"],["value","date-asc"],["value","date-desc"],["value","progress-asc"],["value","progress-desc"],[1,"savings-container"],[1,"card","m-2"],[1,"no-savings-ui"],["aria-label","Savings pagination",1,"d-flex","justify-content-center","mt-3"],[1,"toast-container"],[1,"toast","align-items-center","border-0"],[1,"d-flex","justify-content-between"],["role","alert",1,"toast-body","d-flex","align-items-center"],[1,"fas","fa-check-circle",3,"ngClass"],["type","button","data-bs-dismiss","toast","aria-label","Close",1,"btn-close","btn-close-white","me-2","m-auto"],[1,"card-header","bg-dark","text-white"],[1,"card-title","placeholder","col-6"],[1,"card-body"],[1,"card-text","placeholder","col-6"],[1,"progress-information"],[1,"placeholder","col-4"],[1,"placeholder","col-2"],[1,"saving-progress-container"],[1,"placeholder","col-12","placeholder-progress"],[1,"progress-information","mt-2"],[1,"placeholder","col-3"],[1,"no-savings-icon-wrapper"],[1,"bi","bi-piggy-bank","no-savings-icon"],[1,"no-savings-text"],[1,"card-title"],[1,"card-text"],[3,"progressPercentage"],[1,"card-footer","d-flex","bg-white","p-3"],[1,"btn","btn-primary","w-100",3,"routerLink"],[1,"pagination"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],[1,"page-item",3,"active"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-item","ms-2","d-flex","align-items-center"],[1,"mx-2"],["type","number","min","1",1,"form-control","form-control-sm","pagination-input",3,"change","value"],[1,"page-link",3,"click"]],template:function(e,a){if(e&1){let s=h();g(0,"app-header")(1,"app-toggleable-sidebar"),n(2,"main")(3,"div",1)(4,"div",2)(5,"div")(6,"input",3),f("ngModelChange",function(O){return m(s),u(a.searchQuery.set(O))}),i()(),n(7,"div")(8,"button",4),g(9,"i",5),r(10," Add New Saving "),i()(),n(11,"div",6)(12,"select",7),f("ngModelChange",function(O){return m(s),u(a.sortOption.set(O))}),n(13,"option",8),r(14,"Name (A-Z)"),i(),n(15,"option",9),r(16,"Name (Z-A)"),i(),n(17,"option",10),r(18,"Goal Date (Earliest)"),i(),n(19,"option",11),r(20,"Goal Date (Latest)"),i(),n(21,"option",12),r(22,"Progress (Lowest)"),i(),n(23,"option",13),r(24,"Progress (Highest)"),i()()()(),n(25,"div",14),y(26,se,16,0,"div",15)(27,ce,8,0,"div",16),E(28,ge,30,19,"div",15,re),i(),y(30,de,16,9,"nav",17),n(31,"div",18)(32,"div",19,0)(34,"div",20)(35,"div",21),g(36,"i",22),n(37,"span"),r(38),i()(),g(39,"button",23),i()()()()()}e&2&&(o(6),x("ngModel",a.searchQuery()),o(6),x("ngModel",a.sortOption()),o(14),k(a.isLoading()?26:a.filteredSavings().length===0?27:-1),o(2),T(a.paginatedSavings()),o(2),k(a.totalPages()>1?30:-1),o(6),x("ngClass",L(6,oe,a.toastType()==="success",a.toastType()==="error")),o(2),P(a.toastMessage()))},dependencies:[R,Q,W,$,ne,X,U,J,K,H,Z,Y,q,F,A],styles:["@keyframes _ngcontent-%COMP%_fadeSlideIn{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.pagination[_ngcontent-%COMP%]{gap:.15rem;margin-top:1rem}.page-link[_ngcontent-%COMP%]{font-size:1.1rem;padding:.65rem 1.1rem;border-radius:10px}}@media (max-width: 425px){.pagination[_ngcontent-%COMP%]{flex-wrap:wrap;gap:.1rem;margin-top:.5rem}.page-link[_ngcontent-%COMP%]{font-size:1.15rem;padding:.75rem 1.2rem;border-radius:12px;min-width:44px;min-height:44px}.page-item[_ngcontent-%COMP%]{margin:2px 0}}main[_ngcontent-%COMP%]{margin-left:80px;background-color:#f9fafb;padding:10px;height:100%;margin-top:70px;height:100vh}.inner-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px;border-radius:8px}.actions-container[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;flex-direction:row;align-items:center;gap:1em;width:100%;flex-wrap:nowrap}.actions-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;align-items:center;flex-shrink:0}.actions-container[_ngcontent-%COMP%]   .savings-search-input[_ngcontent-%COMP%]{width:260px;padding:.7rem 2.5rem .7rem 1.1rem;border:2px solid #e5e7eb;border-radius:8px;background:#fff;font-size:1rem;color:#374151;box-shadow:0 1px 3px #0000000a;transition:border-color .2s,box-shadow .2s;outline:none;margin:0}.actions-container[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{padding:.65rem 1.75rem;background:linear-gradient(135deg,#3b82f6,#2563eb);color:#fff;border:none;border-radius:8px;cursor:pointer;font-size:.95rem;font-weight:600;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:.5rem;box-shadow:0 2px 8px #3b82f640;letter-spacing:.3px}.actions-container[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:8px;font-size:1.2em}@media (max-width: 700px){.actions-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.75em}.actions-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%], .actions-container[_ngcontent-%COMP%]   .savings-search-input[_ngcontent-%COMP%], .actions-container[_ngcontent-%COMP%]   button.btn[_ngcontent-%COMP%]{width:100%;justify-content:stretch}.actions-container[_ngcontent-%COMP%]   .savings-search-input[_ngcontent-%COMP%]{margin-bottom:.5em}}.savings-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:flex-start;gap:.5em;flex-wrap:wrap}.no-savings-ui[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fff;border-radius:16px;border:1.5px solid #d1d5db;padding:48px 24px 32px;margin:40px auto 0;width:100%;max-width:600px;min-width:380px;box-shadow:0 2px 8px #0000001a;transition:max-width .2s}.no-savings-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.savings-search-input[_ngcontent-%COMP%]{max-width:320px;width:100%;margin-bottom:1rem;border-radius:8px;border:1.5px solid #b6b6b6;padding:.6rem 1rem;font-size:1rem;box-shadow:0 1px 4px #0000000a;transition:border .2s}.savings-search-input[_ngcontent-%COMP%]:focus{border:1.5px solid #4caf50;outline:none}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;gap:.25rem;margin-top:1.5rem}.page-item[_ngcontent-%COMP%]{margin:0 2px}.page-link[_ngcontent-%COMP%]{border:1.5px solid #b6b6b6;color:#333;background:#fff;border-radius:8px;padding:.45rem 1rem;font-size:1rem;transition:background .2s,color .2s,border .2s}.page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%], .page-link[_ngcontent-%COMP%]:focus, .page-link[_ngcontent-%COMP%]:hover{background:#2563eb;color:#fff;border-color:#2563eb;outline:none}.page-item.disabled[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{color:#b6b6b6;background:#f5f5f5;border-color:#e0e0e0;cursor:not-allowed}.bg-yellow[_ngcontent-%COMP%]{background-color:#ffc000!important}.placeholder-progress[_ngcontent-%COMP%]{height:20px}.pagination-input[_ngcontent-%COMP%]{width:80px}.no-savings-icon-wrapper[_ngcontent-%COMP%]{border-radius:50%;padding:24px;margin-bottom:18px;display:flex;align-items:center;justify-content:center}.no-savings-icon[_ngcontent-%COMP%]{font-size:3.5rem;color:#bdc3c7}.no-savings-text[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333;margin-bottom:8px;text-align:center}.no-savings-ui[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fff;border-radius:16px;padding:95px 24px;margin:20px 0 0;width:100%;max-width:1500px;min-width:380px;box-shadow:0 2px 8px #0000001a;transition:max-width .2s}.savings-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:stretch;flex-wrap:wrap}.savings-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{flex:1 1 25%;max-width:32%;min-width:260px;margin:.5rem;box-sizing:border-box}@media (max-width: 700px){.no-savings-ui[_ngcontent-%COMP%]{max-width:95vw;padding:32px 8px 24px}}.add-saving-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.2rem}.add-saving-btn[_ngcontent-%COMP%]:hover{background:#43a047}.card[_ngcontent-%COMP%]{width:20.5rem}.card[_ngcontent-%COMP%]:hover{box-shadow:4px 4px 12px #0003;transition:box-shadow .3s ease-in-out}.card-header[_ngcontent-%COMP%]{padding:20px}.card-title[_ngcontent-%COMP%]{margin-bottom:0}.card-text[_ngcontent-%COMP%]{color:#666}.card-body[_ngcontent-%COMP%]{height:200px;overflow:hidden;text-overflow:ellipsis}.progress-information[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;color:#666;font-size:14px}.progress-information[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:#333;font-size:14px;margin-bottom:0}.progress-information[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:nth-child(2){color:#333;font-size:14px}.toast-container[_ngcontent-%COMP%]{position:fixed;top:500px;right:15px;z-index:9999;padding:10px;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.toast-body[_ngcontent-%COMP%]   i.fa-check-circle[_ngcontent-%COMP%]{color:#4caf50;font-size:1.2rem;margin-right:5px}.toast-body[_ngcontent-%COMP%]   i.bi-x-circle-fill[_ngcontent-%COMP%]{color:#f44336}.toast-body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}.toast-container.hide[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOut .5s ease-in forwards}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_slideOut{0%{transform:translate(0);opacity:1}to{transform:translate(100%);opacity:0}}@media (max-width: 320px){main[_ngcontent-%COMP%]{margin-left:0;margin-top:60px}.inner-wrapper[_ngcontent-%COMP%]{padding:6px}.actions-container[_ngcontent-%COMP%]{flex-direction:column;gap:6px;padding:0 2px}.actions-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){justify-content:flex-start}.savings-container[_ngcontent-%COMP%]{flex-direction:column;align-items:center;justify-content:center;width:100%;padding:0}.no-savings-ui[_ngcontent-%COMP%]{max-width:100vw;min-width:unset;padding:18px 2px 12px;margin:20px 0 0;border-radius:10px}.card[_ngcontent-%COMP%]{margin:0!important;width:98vw;max-width:100vw;min-width:unset;border-radius:10px}.toast-container[_ngcontent-%COMP%]{inset:auto 0 8px;width:100vw;padding:0 2px}}@media (max-width: 992px){.toast-container[_ngcontent-%COMP%]{inset:auto 15px 15px 0;z-index:1300}}@media (min-width: 321px) and (max-width: 768px){main[_ngcontent-%COMP%]{margin-left:0;margin-top:60px}.inner-wrapper[_ngcontent-%COMP%]{padding:20px}.actions-container[_ngcontent-%COMP%]{padding:20px;flex-direction:column}.savings-container[_ngcontent-%COMP%]{justify-content:center}}.savings-sort-select[_ngcontent-%COMP%]{width:260px;padding:.7rem 2.5rem .7rem 1.1rem;border:2px solid #e5e7eb;border-radius:8px;background-color:#fff;font-size:1rem;color:#374151;box-shadow:0 1px 3px #0000000a;transition:border-color .2s,box-shadow .2s;outline:none;margin:0}"]})};export{ie as Savings};
